<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<!--

游玩前务必了解走法————特别是“有吃必吃”会被误认为是卡顿或是bug
所有棋子均在黑格子中行走。

1、兵的走法

兵的走法是：只能向前斜走一格，不能后退。

2、兵的跳吃

兵的跳吃是：黑白两枚棋子紧连在一条斜线上，如轮到某一方行棋时，对方棋子的前后正好有一空棋位能跳过对方的棋子，那么就可以跳过对方的棋子把被跳过的棋子吃掉，并从棋盘上取下

3、兵的连跳

兵的连跳是是跳过对方的棋子以后，又遇上可以跳过的棋子，那么就可以连续跳过去，把被跳过的棋子吃掉，并且从棋盘上一次取下。兵的走法是不能后退，但是遇到跳吃或连续跳时，可以退跳或吃子。

4、兵的升变

对局开始前双方在棋盘上摆的棋子都是兵，兵在对局过程中，走到或跳到对方底线停下，即可升变为“王”刚升变的王要到下一步才能享有王的走法的权利。

兵在对局过程中，走到或跳到对方底线没停下（即中途经过），不可以升变为“王”。

5、王的走法

王的走法是：王在其位于任何一条斜线上均可进退，并且不限格数。（类似国际象棋的象的走法）

6、王的跳吃

王的跳吃是王与对方棋子遇在同一斜线上，不管相距有几个棋位，对方棋子的前后只要有空棋位，那么王棋就可以跳过去吃掉对方的棋子，而且跳吃时要跳过的对方棋子前后面的那一个空位里。

7、王的连跳

王的连跳与兵连跳的情况基本上相同，只是不限距离。

吃子规定
1、有吃必吃

凡有跳吃或连跳机会时，不管对自己是否有利都必须连续跳吃或跳过，尤其是王。如果有连跳的局面，必须将对方所有的棋子跳完，直到无可再跳时才能停下。

2、吃多数棋子（必须吃多不能吃少）

如果有两条路线或2枚棋子都能吃对方的棋子，那么不管是否对自己有利，必须吃多的棋子。例如：同时在两条路线上可以吃对方的棋子，一条路线上能吃3枚棋子，另一条路线上能吃2枚棋子，必须先跳吃3枚棋子（的线路）。

3、土耳其打击

在连跳时，王或兵都必须将对方所有可能跳过的棋子跳完以后，才可以将对方被跳过的棋子从棋盘上一次性取下。一着棋连跳中即不允许跳一枚（棋子）取一枚（棋子），也不允许重复地两次跳过对方的同一枚棋子。利用这条规定形成的吃子方法叫做土耳其打击。-->
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link href="style/main.css" rel="stylesheet" type="text/css" />
	<title>国际跳棋</title>
	<script language="javascript">
		var boarda = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
		nowplay = 1;
		stoneclr = ["stonew.png", "stonebl.png"];
		stonekclr = ["stonekw.png", "stonekbl.png"];
		wmoveimg = "stonem.png";
		estoneimg = ["stonewe.png", "stoneble.png"];
		ekstoneimg = ["stonekwe.png", "stonekble.png"];
		var sltstone = -1;
		var ustonea = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20];
		var peata = [[[6, 11]],//0
		[[6, 10], [7, 12]],
		[[7, 11], [8, 13]],
		[[8, 12], [9, 14]],
		[[9, 13]],//4
		[[10, 16]],
		[[10, 15], [11, 17]],
		[[11, 16], [12, 18]],
		[[12, 17], [13, 19]],
		[[13, 18]],
		[[6, 1], [16, 21]],//10
		[[6, 0], [7, 2], [16, 20], [17, 22]],
		[[7, 1], [8, 3], [17, 21], [18, 23]],
		[[8, 2], [9, 4], [18, 22], [19, 24]],
		[[9, 3], [19, 23]],
		[[10, 6], [20, 26]],//15
		[[10, 5], [11, 7], [20, 25], [21, 27]],
		[[11, 6], [12, 8], [21, 26], [22, 28]],
		[[12, 7], [13, 9], [22, 27], [23, 29]],
		[[13, 8], [23, 28]],
		[[16, 11], [26, 31]],//20
		[[16, 10], [17, 12], [26, 30], [27, 32]],
		[[17, 11], [18, 13], [27, 31], [28, 33]],
		[[18, 12], [19, 14], [28, 32], [29, 34]],
		[[19, 13], [29, 33]],
		[[20, 16], [30, 36]],//25
		[[20, 15], [21, 17], [30, 35], [31, 37]],
		[[21, 16], [22, 18], [31, 36], [32, 38]],
		[[22, 17], [23, 19], [32, 37], [33, 39]],
		[[23, 18], [33, 38]],
		[[26, 21], [36, 41]],//30
		[[26, 20], [27, 22], [36, 40], [37, 42]],
		[[27, 21], [28, 23], [37, 41], [38, 43]],
		[[28, 22], [29, 24], [38, 42], [39, 44]],
		[[29, 23], [39, 43]],
		[[30, 26], [40, 46]],//35
		[[30, 25], [31, 27], [40, 45], [41, 47]],
		[[31, 26], [32, 28], [41, 46], [42, 48]],
		[[32, 27], [33, 29], [42, 47], [43, 49]],
		[[33, 28], [43, 48]],
		[[36, 31]],//40
		[[36, 30], [37, 32]],
		[[37, 31], [38, 33]],
		[[38, 32], [39, 34]],
		[[39, 33]],
		[[40, 36]],//45
		[[40, 35], [41, 37]],
		[[41, 36], [42, 38]],
		[[42, 37], [43, 39]],
		[[43, 38]]];
		//前一个数组代表白方的进攻方向 后一个数组代表黑方的进攻方向
		var pmovea = [[[], [5, 6]],//0
		[[], [6, 7]],
		[[], [7, 8]],
		[[], [8, 9]],
		[[], [9]],//4
		[[0], [10]],
		[[0, 1], [10, 11]],
		[[1, 2], [11, 12]],
		[[2, 3], [12, 13]],
		[[3, 4], [13, 14]],//9
		[[5, 6], [15, 16]],
		[[6, 7], [16, 17]],
		[[7, 8], [17, 18]],
		[[8, 9], [18, 19]],
		[[9], [19]],
		[[10], [20]],//15
		[[10, 11], [20, 21]],
		[[11, 12], [21, 22]],
		[[12, 13], [22, 23]],
		[[13, 14], [23, 24]],
		[[15, 16], [25, 26]],
		[[16, 17], [26, 27]],
		[[17, 18], [27, 28]],
		[[18, 19], [28, 29]],
		[[19], [29]],
		[[20], [30]],
		[[20, 21], [30, 31]],
		[[21, 22], [31, 32]],
		[[22, 23], [32, 33]],
		[[23, 24], [33, 34]],
		[[25, 26], [35, 36]],
		[[26, 27], [36, 37]],
		[[27, 28], [37, 38]],
		[[28, 29], [38, 39]],
		[[29], [39]],
		[[30], [40]],
		[[30, 31], [40, 41]],
		[[31, 32], [41, 42]],
		[[32, 33], [42, 43]],
		[[33, 34], [43, 44]],
		[[35, 36], [45, 46]],
		[[36, 37], [46, 47]],
		[[37, 38], [47, 48]],
		[[38, 39], [48, 49]],
		[[39], [49]],
		[[40], []],
		[[40, 41], []],
		[[41, 42], []],
		[[42, 43], []],
		[[43, 44], []]];
		//右下 左下 右上 坐上 
		var kmovea = [[[6, 11, 17, 22, 28, 33, 39, 44], [5], [], []],//0
		[[7, 12, 18, 23, 29, 34], [6, 10, 15], [], []],
		[[8, 13, 19, 24], [7, 11, 16, 20, 25], [], []],
		[[9, 14], [8, 12, 17, 21, 26, 30, 35], [], []],
		[[], [9, 13, 18, 22, 27, 31, 36, 40, 45], [], []],
		[[10, 16, 21, 27, 32, 38, 43, 49], [], [0], []],//5
		[[11, 17, 22, 28, 33, 39, 44], [10, 15], [1], [0]],
		[[12, 18, 23, 29, 34], [11, 16, 20, 25], [2], [1]],
		[[13, 19, 24], [12, 17, 21, 26, 30, 35], [3], [2]],
		[[14], [13, 18, 22, 27, 31, 36, 40, 45], [4], [3]],
		[[16, 21, 27, 32, 38, 43, 49], [15], [6, 1], [5]],//10
		[[17, 22, 28, 33, 39, 44], [16, 20, 25], [7, 2], [6, 0]],
		[[18, 23, 29, 34], [17, 21, 26, 30, 35], [8, 3], [7, 1]],
		[[19, 24], [18, 22, 27, 31, 36, 40, 45], [9, 4], [8, 2]],
		[[], [19, 23, 28, 32, 37, 41, 46], [], [9, 3]],
		[[20, 26, 31, 37, 42, 48], [], [10, 6, 1], []],//15
		[[21, 27, 32, 38, 43, 49], [20, 25], [11, 7, 2], [10, 5]],
		[[22, 28, 33, 39, 44], [21, 26, 30, 35], [12, 8, 3], [11, 6, 0]],
		[[23, 29, 34], [22, 27, 31, 36, 40, 45], [13, 9, 4], [12, 7, 1]],
		[[24], [23, 28, 32, 37, 41, 46], [14], [13, 8, 2]],
		[[26, 31, 37, 42, 48], [25], [16, 11, 7, 2], [15]],//20
		[[27, 32, 38, 43, 49], [26, 30, 35], [17, 12, 8, 3], [16, 10, 5]],
		[[28, 33, 39, 44], [27, 31, 36, 40, 45], [18, 13, 9, 4], [17, 11, 6, 0]],
		[[29, 34], [28, 32, 37, 41, 46], [19, 14], [18, 12, 7, 1]],
		[[], [29, 33, 38, 42, 47], [], [19, 13, 8, 2]],
		[[30, 36, 41, 47], [], [20, 16, 11, 7, 2], []],//25
		[[31, 37, 42, 48], [30, 35], [21, 17, 12, 8, 3], [20, 15]],
		[[32, 38, 43, 49], [31, 36, 40, 45], [22, 18, 13, 9, 4], [21, 16, 10, 5]],
		[[33, 39, 44], [32, 37, 41, 46], [23, 19, 14], [22, 17, 11, 6, 0]],
		[[34], [33, 38, 42, 47], [24], [23, 18, 12, 7, 1]],
		[[36, 41, 47], [35], [26, 21, 17, 12, 8, 3], [25]],//30
		[[37, 42, 48], [36, 40, 45], [27, 22, 18, 13, 9, 4], [26, 20, 15]],
		[[38, 43, 49], [37, 41, 46], [28, 23, 19, 14], [27, 21, 16, 10, 5]],
		[[39, 44], [38, 42, 47], [29, 24], [28, 22, 17, 11, 6, 0]],
		[[], [39, 43, 48], [], [29, 23, 18, 12, 7, 1]],
		[[40, 46], [], [30, 26, 21, 17, 12, 8, 3], []],
		[[41, 47], [40, 45], [31, 27, 22, 18, 13, 9, 4], [30, 25]],
		[[42, 48], [41, 46], [32, 28, 23, 19, 14], [31, 26, 20, 15]],
		[[43, 49], [42, 47], [33, 29, 24], [32, 27, 21, 16, 10, 5]],
		[[44], [43, 48], [34], [33, 28, 22, 17, 11, 6, 0]],
		[[46], [45], [36, 31, 27, 22, 18, 13, 9, 4], [35]],
		[[47], [46], [37, 32, 28, 23, 19, 14], [36, 30, 25]],
		[[48], [47], [38, 33, 29, 24], [37, 31, 26, 20, 15]],
		[[49], [48], [39, 34], [38, 32, 27, 21, 16, 10, 5]],
		[[], [49], [], [39, 33, 28, 22, 17, 11, 6, 0]],
		[[], [], [40, 36, 31, 27, 22, 18, 13, 9, 4], []],
		[[], [], [41, 37, 32, 28, 23, 19, 14], [40, 35]],
		[[], [], [42, 38, 33, 29, 24], [41, 36, 30, 25]],
		[[], [], [43, 39, 34], [42, 37, 31, 26, 20, 15]],
		[[], [], [44], [43, 38, 32, 27, 21, 16, 10, 5]]];
		var boardvd = [10, 10, 10, 10, 10,
			10, 9, 9, 9, 10,
			9, 8, 7, 8, 9,
			8, 7, 6, 7, 8,
			7, 6, 5, 6, 7,
			6, 5, 4, 5, 6,
			5, 4, 3, 4, 5,
			4, 3, 2, 3, 4,
			3, 2, 1, 2, 3,
			2, 1, 0, 1, 2];

		var boardvu = [0, -1, -2, -1, 0,
			-2, -3, -4, -3, -2,
			-3, -4, -5, -4, -3,
			-4, -5, -6, -5, -4,
			-5, -6, -7, -6, -5,
			-6, -7, -8, -7, -6,
			-7, -8, -9, -8, -7,
			-8, -9, -10, -9, -8,
			-9, -10, -11, -10, -9,
			-10, -11, -12, -11, -10];
		var smovea = [];
		var semovea = [];
		var sestonea = [];
		var mstep = 1;
		var amove = [];
		var aestone = [];
		var nowmove = [];
		var estep = 0;
		var clkeata = [];
		var cestep = 0;
		var sboarda = [];
		var sdeep = 5;
		var clkbm = 1;
		var gamestep = 0;
		var spoint = 0;
		var cuttime = 0;

		function rid(id) {
			return document.getElementById(id);
		}
		//它接受一个字符串参数 id，并返回与给定 id 匹配的 HTML 元素。
		function formatboard() {
			for (n = 0; n < 20; n++) {//上半区棋子
				boarda[n] = -1;
				rid("clk" + n).className = "";
			}
			for (n = 20; n < 30; n++) {//空白区
				boarda[n] = 0;
				rid("clk" + n).className = "";
			}
			for (n = 30; n < 50; n++) {//下半区
				boarda[n] = 1;
				rid("clk" + n).className = "";
			}
			for (n = 0; n < smovea.length; n++) {
				rid("clk" + smovea[n][0]).className = "pointer";
			}

		}
		//className 是 JavaScript 中用于访问和修改 HTML 元素的 class 属性的属性。
		function printboard() {
			for (n = 0; n < 50; n++) {
				if (boarda[n] != 0) {

					if (boarda[n] == 1) {
						rid("stn" + n).innerHTML = '<img src="images/' + stoneclr[0] + '">';
						rid("shd" + n).innerHTML = '<img src="images/shadow.png">';
					} else if (boarda[n] == -1) {
						rid("stn" + n).innerHTML = '<img src="images/' + stoneclr[1] + '">';
						rid("shd" + n).innerHTML = '<img src="images/shadow.png">';
					} else if (boarda[n] == 10) {
						rid("stn" + n).innerHTML = '<img src="images/' + stonekclr[0] + '">';
						rid("shd" + n).innerHTML = '<img src="images/shadow.png">';
					} else if (boarda[n] == -10) {
						rid("stn" + n).innerHTML = '<img src="images/' + stonekclr[1] + '">';
						rid("shd" + n).innerHTML = '<img src="images/shadow.png">';
					} else if (boarda[n] == 500) {
						rid("stn" + n).innerHTML = '<img src="images/' + estoneimg[0] + '">';
						rid("shd" + n).innerHTML = '<img src="images/shadow.png">';
					}
					else if (boarda[n] == -500) {
						rid("stn" + n).innerHTML = '<img src="images/' + estoneimg[1] + '">';
						rid("shd" + n).innerHTML = '<img src="images/shadow.png">';
					} else if (boarda[n] == 5000) {
						rid("stn" + n).innerHTML = '<img src="images/' + ekstoneimg[0] + '">';
						rid("shd" + n).innerHTML = '<img src="images/shadow.png">';
					}
					else if (boarda[n] == -5000) {
						rid("stn" + n).innerHTML = '<img src="images/' + ekstoneimg[1] + '">';
						rid("shd" + n).innerHTML = '<img src="images/shadow.png">';
					} else if (boarda[n] == 1000) {
						rid("stn" + n).innerHTML = '<img src="images/' + wmoveimg + '">';
						rid("clk" + n).className = "pointer";
					}
				} else {
					rid("shd" + n).innerHTML = '';
					rid("stn" + n).innerHTML = '';
					rid("clk" + n).className = "";
				}
			}
		}
		function restart() {

			formatboard();//先初始化
			printboard();//画盘
			nowplay = 1;//当前玩家
			gamestep = 0;//游戏步数
			makemove();//该函数为当前玩家生成可用的移动
			addpointer();//此函数向棋盘添加指针以指示可能的移动。
			if (stoneclr[0] == "stonebl.png") {
				gamestep = -1;
				changeplayer();
			}
		}
		function clk(n) {//点击
			if (nowplay == 1) {
				if (boarda[n] > 0 && boarda[n] < 1000) {//点击的是一个白棋或者黑棋
					if (isamstone(n)) {
						sltstone = n;

						printwmove(n);
					} else {
						if (cestep == 0) {
							cleanwmove();
						}
					}


				} else if (boarda[n] == 1000 && sltstone != -1) {//点击的是一个指针？
					if (ismove(sltstone, n)) {//从sltstone到n是可移动的
						a = sltstone;
						b = n;
						stonemove(a, b);
						cleanwmove();
						if (semovea.length > 0) {
							stoneeat(a, b);
							if (mstep > 1) {
								cestep = 1;
								clkeata = [a, b];
								printwmove2(cestep, b);
							} else {
								cleaneatstone();
								uptoking(n);
								changeplayer();
							}

						} else {
							uptoking(n);
							changeplayer();
						}

					} else {

					}

				} else if (boarda[n] == 1000 && cestep > 0) {
					cestep++;
					clkeata.push(n);
					printwmove2(cestep, n);
					stonemove(clkeata[clkeata.length - 2], n);
					stoneeat(clkeata[clkeata.length - 2], n)

					if (cestep == mstep) {
						cleaneatstone();
						cestep = 0;
						uptoking(clkeata[clkeata.length - 1]);

						clkeata = [];

						changeplayer();
					}


				} else {

				}
			}
		}
		function uptoking(p) {
			if (p < 5 && boarda[p] == 1 && cestep == 0) {
				boarda[p] = 10;
			}
			if (p > 44 && boarda[p] == -1 && cestep == 0) {
				boarda[p] = -10;
			}
			printboard();


		}
		function changeplayer() {
			gamestep++;
			if (gamestep == 1 && nowplay == 1) {
				button
				rid("button").src = "images/restart.png";
				clkbm = 0;
			}
			if (gamestep == 2 && nowplay == 1) {
				rid("button").src = "images/restart.png";
				clkbm = 0;
			}
			if (nowplay == 1) {
				nowplay = -1;
				cleanpointer();
				upplay();
			} else if (nowplay == -1) {
				nowplay = 1;
				makemove();
				if (semovea.length == 0 && smovea.length == 0) {
					toend();
				} else {
					addpointer();
				}

			}
		}
		function upplay() {
			makemove();
			if (semovea.length == 0 && smovea.length == 0) {
				toend();
			} else {
				if (semovea.length == 1) {
					nowmove = [semovea[0].concat(), sestonea[0].concat()];
				} else if (smovea.length == 1) {
					nowmove = [smovea[0].concat(), []];
				} else {
					spoint = 0;
					cuttime = 0;
					searchmove(0, 10000, -10000);
				}
			}
			domove();

		}
		function makemove() {
			semovea = [];
			sestonea = [];
			smovea = [];
			mstep = 0;
			if (nowplay == 1) {
				var s1 = 1;//兵
				var s2 = 10;//王
				var mc = 0;//阵营
			} else {
				var s1 = -1;//兵
				var s2 = -10;//王
				var mc = 1;//阵营
			}
			for (var n = 0; n < 50; n++) {
				if (boarda[n] == s1) {//如果是白棋，遍历。
					amove = [n];//创建一个只包含一个元素 n 的数组
					sclr = boarda[n];//临时转换 sclr保留原本棋子的状态
					boarda[n] = 0;//将点击位置的棋子置为空白
					//传递棋子的状态 -1 点击的位置
					makepeatmove(sclr, -1, n);//状态，阵营，点击位置
					boarda[n] = sclr;//转换回来
				} else if (boarda[n] == s2) {//王
					amove = [n];
					sclr = boarda[n];
					boarda[n] = 0;
					makekeatmove(sclr, -1, n);
					boarda[n] = sclr;
				}
			}
			if (semovea.length == 0) {//如果没有找到吃，则开始寻找一个普通移动
				mstep = 1;
				for (var n = 0; n < 50; n++) {
					if (boarda[n] == s1) {
						makefmove(mc, n);//mc代表的是不同阵营
					} else if (boarda[n] == s2) {
						makekmove(n);
					}
				}
			}


		}
		// 状态 阵营 点击位（终点）
		function makepeatmove(clr, sf, ss) {
			re = false;//临时变量re
			for (var n = 0; n < peata[ss].length; n++) {//遍历被点击棋子的整个可吃移动数组
				//如果被越过棋子和目前点击的棋子不是一家 且 落点的状态为空 且 落点位置不为-1（可以修改吧？）
				if (boarda[peata[ss][n][0]] * clr < 0 && boarda[peata[ss][n][1]] == 0 && peata[ss][n][1] != sf) {
					isnorepeat = true;//可移动
					for (var m = 0; m < aestone.length; m++) {
						if (aestone[m] == peata[ss][n][0]) {
							//越过的位置会被吃掉？则不能越过
							isnorepeat = false;
							break;
						}
					}
					if (isnorepeat) {//如果可移动
						//将移动的放到amove
						amove.push(peata[ss][n][1]);
						//将被越过的部分进入到aestone代表已经跳过 不能重复跳 
						aestone.push(peata[ss][n][0]);
						//再次调用makepeatmove看看能否连跳
						makepeatmove(clr, ss, peata[ss][n][1]);
						re = true;
						amove.pop();//调用 pop() 方法将会移除并返回该数组的最后一个元素。
						aestone.pop();
					}
				}
			}
			if (!re) {//只有经过第一步确定 不存在可以吃的棋子 才进入这一步
				if (amove.length > 1) {//除了初始值以外 有额外可移动的点位
					if (amove.length - 1 > mstep) {//本次移动的步长大于记录的步长
						mstep = amove.length - 1;//选择最长的吃子序列

						semovea = [];
						sestonea = [];
						var pmove = amove.concat();
						semovea.push(pmove);
						var pestone = aestone.concat();
						sestonea.push(pestone);
						//如果当前吃子序列和保存的吃子序列长度相同
					} else if (amove.length - 1 == mstep) {
						var pmove = amove.concat();  //保存amove
						var pestone = aestone.concat(); ////保存aestone 以下是保存过程
						noerepeat = true;//临时变量
						for (var x = 0; x < sestonea.length; x++) {//比较本次移动序列相较于上一次的变化在哪
							if (pmove[0] == semovea[x][0] && pmove[pmove.length - 1] == semovea[x][semovea[x].length - 1]) {

								var estone1 = pestone.concat();
								estone1.sort();//给当前被吃的棋子排序

								var estone2 = sestonea[x].concat();
								estone2.sort();//给游戏过程中的简单吃石序列排序

								samees = true;
								for (var y = 0; y < estone1.length; y++) {
									if (estone1[y] != estone2[y]) {
										samees = false;//不相同，则samess等于false

										break;
									}
								}
								if (samees) {
									noerepeat = false;//相同，则noerepeat等于false

									break;
								}
							}
						}
						if (noerepeat) {//如果不相同 则执行该句 把当前序列加入到对应的
							semovea.push(pmove);
							sestonea.push(pestone);
						}

					}

				}
			}

		}
		function makekeatmove(clr, sd, ss) {
			var re = false;
			for (var n = 0; n < 4; n++) { //四个方位
				if (n != sd) {//对当前落点的其余位置进行一个判断，判断和上一次前进方向不同的方向是否有可移动的棋子
					var afteres = false;

					for (var m = 0; m < kmovea[ss][n].length; m++) {
						//看是否有满足王的攻击条件的棋子
						if (afteres) {//第一次不会进入这个if
							if (boarda[kmovea[ss][n][m]] == 0) {//如果落点位置为空
								isnorepeat = true;
								for (var x = 0; x < aestone.length; x++) {
									if (aestone[x] == es) {
										isnorepeat = false;//已经被跳过了 不能移动 跳出这个循环
										break;
									}
								}
								if (isnorepeat) {//如果可移动
									re = true;
									aestone.push(es);//将es进入到被跳过棋子序列
									amove.push(kmovea[ss][n][m]);//将当前棋子的位置进入到amove
									if (n == 0) {//如果是从0方位，则下一次到3，3到
										tsd = 3;
									} else if (n == 1) {
										tsd = 2;
									} else if (n == 2) {
										tsd = 1;
									} else if (n == 3) {
										tsd = 0;
									}
									makekeatmove(clr, tsd, kmovea[ss][n][m]);//递归吃
									amove.pop();
									aestone.pop();
								} else {
									break;
								}
							} else {

								break;
							}
						} else {
							if (boarda[kmovea[ss][n][m]] != 0) {//保证被攻击的位置不是空的
								if (boarda[kmovea[ss][n][m]] * clr < 0 && !afteres) {//如果跳过的棋子和当前棋子是不同阵营且是第一次（afters==false）
									if (m < kmovea[ss][n].length - 1) {//保证这个棋子是有这个方位的棋子的，有些棋子并非所有方位都能走
										if (boarda[kmovea[ss][n][m + 1]] == 0) {//如果当前棋子的当前移动方向的下一个棋子是一个空位
											var es = kmovea[ss][n][m];//保存被越过棋子（被吃掉）

											afteres = true;//如果能够顺利找到，进入到下一次遍历

										} else {

											break;//快速跳出
										}
									}

								} else {

									break;////快速跳出
								}

							}
						}


					}
				}

			}
			if (!re) {//第一次进入
				if (amove.length > 1) {//能落点的位置个数大于0			
					if (amove.length - 1 > mstep) {//如果能落点的位置个数大于当前保存的步数
						mstep = amove.length - 1;//使用新的吃子序列
						semovea = [];//将两个清空
						sestonea = [];
						var pmove = amove.concat();
						semovea.push(pmove);
						var pestone = aestone.concat();
						sestonea.push(pestone);//更新最长的序列到sestonea和semovea
					} else if (amove.length - 1 == mstep) {//刚好最长序列和当前序列一样长

						var pmove = amove.concat();  //将当前序列保存起来

						var pestone = aestone.concat();
						noerepeat = true;//没有更长的了==true？
						if (nowplay == -1) {//如果此时是-1玩家
							for (var x = 0; x < sestonea.length; x++) {//遍历最长的能吃的序列
								if (pmove[0] == semovea[x][0] && pmove[pmove.length - 1] == semovea[x][semovea[x].length - 1]) {
									//如果两个序列的起点和终点都相同，那么他们可能会是完全相同的，这里进行一次大致的判断
									var estone1 = pestone.concat();
									estone1.sort();

									var estone2 = sestonea[x].concat();
									estone2.sort();
									//保存两个序列 并且将它们从小到大排序，方便进行详细的判断
									samees = true;
									for (var y = 0; y < estone1.length; y++) {
										if (estone1[y] != estone2[y]) {//判断他们被吃的棋子是不是一样的
											samees = false;
											break;
										}
									}
									if (samees) {
										noerepeat = false;//如果一样 就没必要动了 

										break;
									}
								}
							}
						}
						if (noerepeat) {//如果不一样 就把刚才的吃子行为加进去

							semovea.push(pmove);
							sestonea.push(pestone);
						}

					}
				}
			}
		}
		function makefmove(c, p) {//这个函数生成一个普通棋子可能的着法
			//当找不到能吃的棋子时，才调用这个函数，即sestonea==0。
			//c代表阵营 p代表位置
			//c==0时，代表白方 
			for (var n = 0; n < pmovea[p][c].length; n++) {

				if (boarda[pmovea[p][c][n]] == 0) {
					var pmove = [p, pmovea[p][c][n]];

					smovea.push(pmove.concat());

				}

			}
		}
		function makekmove(kp) {//这个函数生成一个王棋子可能的着法。

			for (var n = 0; n < kmovea[kp].length; n++) {

				for (var m = 0; m < kmovea[kp][n].length; m++) {

					if (boarda[kmovea[kp][n][m]] == 0) {
						var pmove = [kp, kmovea[kp][n][m]];
						smovea.push(pmove.concat());

					} else {
						break
					}
				}

			}
		}

		const map = new Map();//设置置换表
		var key;
		var gvalue;
		function searchmove(sdp, smax, smin) {
			var nsmax = smax;//假设现在就是最大值和最小值
			var nsmin = smin;
			makemove();//生成一个移动
			if (semovea.length == 0 && smovea.length == 0) {//如果没有移动或者普通移动，结束游戏？
				return nowplay * -5000;//抵达终端节点

			}
			if (sdp >= sdeep) {//剪枝 如果sdp大于了sdeep，就不再进行更深的搜索
				if (semovea.length == 0) {//有吃必吃 要把吃子的序列清除干净
					gv = gamevalue();
					return gv;//返回估值 表示达到了终端节点
				}
			}
			if (semovea.length != 0) {//如果 待吃（待走） 序列内有棋子 应该把它们先吃掉 再在此基础上递归
				var shmovea = semovea.concat(); //把 吃子移动 落点棋子放入到搜索数列
			}
			else {
				var shmovea = smovea.concat(); //把 简单移动 落点序列加入到搜索序列
			}

			var ssestonea = sestonea.concat();
			sboarda.push(boarda.concat());//将棋盘的导入到搜索棋盘
			nowplay *= -1;//换边
			var mvalue = nowplay * 10000;
			var moven = -1;
			var sd = sdp;
			if (semovea.length < 1) {
				sd++;//吃动作不占用步数
			}


			for (var n = 0; n < shmovea.length; n++) {//将每一个位置对应的吃子序列的终点的期盼状态修改为起点位置，并将起点位置设置为0，代表棋子已经走到了终点位置
				boarda[shmovea[n][shmovea[n].length - 1]] = boarda[shmovea[n][0]];
				boarda[shmovea[n][0]] = 0;

				tempNum = shmovea[n][shmovea[n].length - 1];//保留终点
				key = [sdp, tempNum];
					if (map.has(key)) {
						// 将键值对添加到 Map 中
						gvalue = map.get(key);
					}
				else {
					p = shmovea[n][shmovea[n].length - 1];//p为终点的棋子坐标
					if (p < 5 && boarda[p] == 1) {//如果p小于5且是白棋 则代表是一个白王
						boarda[p] = 10;
					}
					if (p > 44 && boarda[p] == -1) {//如果p大于44且是一个黑棋 则是一个黑王
						boarda[p] = -10;
					}

					if (ssestonea.length != 0) {//遍历被吃的序列，把它们的位置置为空
						for (var m = 0; m < ssestonea[n].length; m++) {
							boarda[ssestonea[n][m]] = 0;
						}

					}
					gvalue = searchmove(sd, nsmax, nsmin)
					if (!map.has(key)) {
						// 将键值对添加到 Map 中
						map.set(key,gvalue);
					}
				}
				boarda = sboarda[sboarda.length - 1].concat();//将搜索到的最优棋盘赋给原始棋盘

				//nsmax是对应β，nsmin是对应α
				if (nowplay > 0) {//Min层 维护β
					if (gvalue < nsmin) {
						mvalue = gvalue;
						moven = n;
						break;
					} else {
						if (gvalue < mvalue) {//如果当前的gvalue小于mvalue，则更新最小值
							mvalue = gvalue;
							nsmax = Math.min(mvalue, nsmax);//var min = Math.min(a, b);
							moven = n;
						}
					}
					if (nsmin >= nsmax) {
						break;
					}
				}
				else {
					if (gvalue > nsmax) {//MAX层 维护α
						mvalue = gvalue;
						moven = n;
						break;
					} else {
						if (gvalue > mvalue) {//游戏值gvalue大于mvalue
							mvalue = gvalue;//mvalue保留下最大的值
							nsmin = Math.max(mvalue, nsmin);//更新α
							moven = n;
						}
					}
					if (nsmin >= nsmax) {
						break;
					}
				}
			}//循环结束

			nowplay *= -1;//换边？
			sboarda.pop();//删除最后一个元素

			if (sdp == 0) {//没有进行搜索
				if (ssestonea.length != 0) {//但是有被吃了的棋子
					nowmove = [shmovea[moven].concat(), ssestonea[moven].concat()];//前一个坐标量是落点位置，后一个坐标量是被吃的位置（让棋子跳到被吃了的棋子的位置）
				} else {
					nowmove = [shmovea[moven].concat(), []];//相当于进行了一次普通移动
				}
				mstep = shmovea[moven].length - 1;//更新步数

			}
			return mvalue;
		}

		function gamevalue() {

			v1 = 0;
			v2 = 0;
			v3 = 0;
			for (var n = 0; n < 50; n++) {
				v1 += boarda[n];//整盘的棋子数判定
				if (boarda[n] == 1 || boarda[n] == -1) {
					for (var x = 0; x < peata[n].length; x++) {
						if (boarda[peata[n][x][0]] == 0) {

							v2 += boarda[n];//如果peata[n][x][0]] == 0 则说明这一方向的 落点为空 可以进行吃操作 该棋子的威力就越大
						}
					}
					if (boarda[n] == 1) {
						v3 += boardvd[n];//遍历得到全盘的估值
					} else {
						v3 += boardvu[n];//遍历得到全盘的估值
					}

				} else if (boarda[n] == 10 || boarda[n] == -10) {
					v2 += kmovea[n][0].length + kmovea[n][1].length + kmovea[n][2].length + kmovea[n][3].length;
				}
			}
			v1 = v1 * 20;

			return v1 + v2 + v3;
		}
		function domove() {

			if (nowmove.length == 2) {

				if (nowmove[1].length == 0) {

					stonemove(nowmove[0][0], nowmove[0][1]);
					uptoking(nowmove[0][1]);
					changeplayer();
				} else {

					estep = 0;
					eatmove();
				}
			}
		}
		function eatmove() {

			if (mstep > estep) {

				stonemove(nowmove[0][estep], nowmove[0][estep + 1]);
				eatstone(nowmove[1][estep]);
				estep++;
				setTimeout(eatmove, 1000);

			} else if (mstep == estep) {
				uptoking(nowmove[0][nowmove[0].length - 1]);
				cleaneatstone();
				changeplayer();
			}
		}
		function cleaneatstone() {
			for (n = 0; n < 50; n++) {
				if (boarda[n] == 500 || boarda[n] == -500 || boarda[n] == 5000 || boarda[n] == -5000) {
					boarda[n] = 0;

				}
			}
			printboard();
		}
		function eatstone(es) {
			if (boarda[es] == 1) {
				boarda[es] = 500;
			} else if (boarda[es] == -1) {
				boarda[es] = -500;
			} else if (boarda[es] == 10) {
				boarda[es] = 5000;
			} else if (boarda[es] == -10) {
				boarda[es] = -5000;
			}

			printboard();
		}
		function isamstone(a) {
			for (n = 0; n < smovea.length; n++) {
				if (smovea[n][0] == a) return true;
			}
			for (n = 0; n < semovea.length; n++) {
				if (semovea[n][0] == a) return true;
			}
			return false;
		}
		function addpointer() {
			for (n = 0; n < smovea.length; n++) {
				rid("clk" + smovea[n][0]).className = "pointer";
			}
			for (n = 0; n < semovea.length; n++) {
				rid("clk" + semovea[n][0]).className = "pointer";
			}
		}
		function printwmove(a) {
			cleanwmoveimg();
			for (n = 0; n < smovea.length; n++) {
				if (smovea[n][0] == a) {//第一步跳

					boarda[smovea[n][1]] = 1000;
				}
			}
			for (n = 0; n < semovea.length; n++) {
				if (semovea[n][0] == a) {//连跳显示

					boarda[semovea[n][1]] = 1000;
				}
			}
			printboard();
		}
		function printwmove2(est, ens) {
			cleanwmoveimg();

			if (est <= mstep) {

				for (var n = 0; n < semovea.length; n++) {

					cn = 0;
					for (var x = 0; x <= est; x++) {

						if (semovea[n][x] == clkeata[x]) cn++;
					}

					if (cn == est + 1) {

						if (est < mstep) {

							boarda[semovea[n][est + 1]] = 1000;

						}

					}
				}
			}
			printboard();
		}
		function cleanwmove() {
			sltstone = -1;
			cleanwmoveimg();
		}
		function cleanwmoveimg() {
			for (n = 0; n < 50; n++) {
				if (boarda[n] == 1000) {//清理指针
					boarda[n] = 0;
				}
			}
			printboard();
		}
		function cleanpointer() {
			for (n = 0; n < 50; n++) {
				rid("clk" + n).className = "";
			}
		}
		function ismove(a, b) {

			for (n = 0; n < smovea.length; n++) {
				if (smovea[n][0] == a && smovea[n][1] == b) return true;
			}
			for (n = 0; n < semovea.length; n++) {
				if (semovea[n][0] == a && semovea[n][1] == b) {
					return true;
				}
			}

			return false;
		}
		function stoneeat(a, b) {

			for (var x = 0; x < semovea.length; x++) {

				for (var y = 0; y < semovea[x].length - 1; y++) {
					if (semovea[x][y] == a && semovea[x][y + 1] == b) {

						boarda[sestonea[x][y]] = -500;
						printboard();
						break;
					}
				}

			}
		}
		function stonemove(a, b) {

			boarda[b] = boarda[a];
			saveData(a + 1, b + 1);
			boarda[a] = 0;
			sltstone = -1;

			printboard();
		}
		var data = '';
		var g = 1;
		function saveData(a, b) {
			if (Math.abs(a - b) > 5)
				data += '    ' + a + '位置' + '  x  ' + b + '位置' + '\n';
			// 增加回合数
			else
				data += '    ' + a + '位置' + '  ~  ' + b + '位置' + '\n';
			g++;
		}



		function downloadRecord() {
			downloadFile(data, 'chess_record.txt');
		}

		function downloadFile(data, filename) {
			var element = document.createElement('a');
			element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(data));
			element.setAttribute('download', filename);
			element.style.display = 'none';
			document.body.appendChild(element);
			element.click();
			document.body.removeChild(element);
		}

		function toend() {
			if (nowplay == 1) {
				alert("You Lose!");
				rid("button").src = "images/change.png";
				clkbm = 1;
				restart();
			} else if (nowplay == -1) {
				alert("You Win!");
				rid("button").src = "images/change.png";
				clkbm = 1;
				restart();
			}
		}
		function clkwhite() {

		}
		function clkb() {
			if (clkbm == 0) {
				restart();
				rid("button").src = "images/change.png";
				clkbm = 1;
			} else if (clkbm == 1) {
				changestoneimg();
				restart();

			}

		}
		function changestoneimg() {
			if (stoneclr[0] == "stonew.png") {
				stoneclr = ["stonebl.png", "stonew.png"];
				stonekclr = ["stonekbl.png", "stonekw.png"];
				estoneimg = ["stoneble.png", "stonewe.png"];
				ekstoneimg = ["stonekble.png", "stonekwe.png"];
			} else {
				stoneclr = ["stonew.png", "stonebl.png"];
				stonekclr = ["stonekw.png", "stonekbl.png"];
				estoneimg = ["stonewe.png", "stoneble.png"];
				ekstoneimg = ["stonekwe.png", "stonekble.png"];
			}

		}
	</script>
</head>

<body onload="restart();">
	<div id="head">
		<img id="logo" src="images/logo.png">
		<img onClick="clkb();" id="button" src="images/change.png">
		<div id='output'></div>
	</div>
	<div id="board">
		<table id="tb1" align="center">
			<tr>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>1</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>2</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>3</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>4</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>5</td>
			</tr>
			<tr>
				<td align=right valign=bottom class=td3>6</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>7</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>8</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>9</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>10</td>
				<td align=right valign=bottom> </td>
			</tr>
			<tr>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>11</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>12</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>13</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>14</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>15</td>
			</tr>
			<tr>
				<td align=right valign=bottom class=td3>16</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>17</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>18</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>19</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>20</td>
				<td align=right valign=bottom> </td>
			</tr>
			<tr>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>21</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>22</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>23</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>24</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>25</td>
			</tr>
			<tr>
				<td align=right valign=bottom class=td3>26</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>27</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>28</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>29</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>30</td>
				<td align=right valign=bottom> </td>
			</tr>
			<tr>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>31</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>32</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>33</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>34</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>35</td>
			</tr>
			<tr>
				<td align=right valign=bottom class=td3>36</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>37</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>38</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>39</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>40</td>
				<td align=right valign=bottom> </td>
			</tr>
			<tr>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>41</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>42</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>43</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>44</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>45</td>
			</tr>
			<tr>
				<td align=right valign=bottom class=td3>46</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>47</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>48</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>49</td>
				<td align=right valign=bottom> </td>
				<td align=right valign=bottom class=td3>50</td>
				<td align=center valign=middle></td>
			</tr>
		</table>
		<table id="tb2" cellpadding="0" cellspacing="0" align="center">
			<tr>
				<td></td>
				<td id="shd0" align="left" valign="top"></td>
				<td></td>
				<td id="shd1" align="left" valign="top"></td>
				<td></td>
				<td id="shd2" align="left" valign="top"></td>
				<td></td>
				<td id="shd3" align="left" valign="top"></td>
				<td></td>
				<td id="shd4" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="shd5" align="left" valign="top"></td>
				<td></td>
				<td id="shd6" align="left" valign="top"></td>
				<td></td>
				<td id="shd7" align="left" valign="top"></td>
				<td></td>
				<td id="shd8" align="left" valign="top"></td>
				<td></td>
				<td id="shd9" align="left" valign="top"></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td id="shd10" align="left" valign="top"></td>
				<td></td>
				<td id="shd11" align="left" valign="top"></td>
				<td></td>
				<td id="shd12" align="left" valign="top"></td>
				<td></td>
				<td id="shd13" align="left" valign="top"></td>
				<td></td>
				<td id="shd14" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="shd15" align="left" valign="top"></td>
				<td></td>
				<td id="shd16" align="left" valign="top"></td>
				<td></td>
				<td id="shd17" align="left" valign="top"></td>
				<td></td>
				<td id="shd18" align="left" valign="top"></td>
				<td></td>
				<td id="shd19" align="left" valign="top"></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td id="shd20" align="left" valign="top"></td>
				<td></td>
				<td id="shd21" align="left" valign="top"></td>
				<td></td>
				<td id="shd22" align="left" valign="top"></td>
				<td></td>
				<td id="shd23" align="left" valign="top"></td>
				<td></td>
				<td id="shd24" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="shd25" align="left" valign="top"></td>
				<td></td>
				<td id="shd26" align="left" valign="top"></td>
				<td></td>
				<td id="shd27" align="left" valign="top"></td>
				<td></td>
				<td id="shd28" align="left" valign="top"></td>
				<td></td>
				<td id="shd29" align="left" valign="top"></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td id="shd30" align="left" valign="top"></td>
				<td></td>
				<td id="shd31" align="left" valign="top"></td>
				<td></td>
				<td id="shd32" align="left" valign="top"></td>
				<td></td>
				<td id="shd33" align="left" valign="top"></td>
				<td></td>
				<td id="shd34" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="shd35" align="left" valign="top"></td>
				<td></td>
				<td id="shd36" align="left" valign="top"></td>
				<td></td>
				<td id="shd37" align="left" valign="top"></td>
				<td></td>
				<td id="shd38" align="left" valign="top"></td>
				<td></td>
				<td id="shd39" align="left" valign="top"></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td id="shd40" align="left" valign="top"></td>
				<td></td>
				<td id="shd41" align="left" valign="top"></td>
				<td></td>
				<td id="shd42" align="left" valign="top"></td>
				<td></td>
				<td id="shd43" align="left" valign="top"></td>
				<td></td>
				<td id="shd44" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="shd45" align="left" valign="top"></td>
				<td></td>
				<td id="shd46" align="left" valign="top"></td>
				<td></td>
				<td id="shd47" align="left" valign="top"></td>
				<td></td>
				<td id="shd48" align="left" valign="top"></td>
				<td></td>
				<td id="shd49" align="left" valign="top"></td>
				<td></td>
			</tr>
		</table>
		<table id="tb3" cellpadding="0" cellspacing="0" align="center">
			<tr>
				<td></td>
				<td id="stn0" align="left" valign="top"></td>
				<td></td>
				<td id="stn1" align="left" valign="top"></td>
				<td></td>
				<td id="stn2" align="left" valign="top"></td>
				<td></td>
				<td id="stn3" align="left" valign="top"></td>
				<td></td>
				<td id="stn4" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="stn5" align="left" valign="top"></td>
				<td></td>
				<td id="stn6" align="left" valign="top"></td>
				<td></td>
				<td id="stn7" align="left" valign="top"></td>
				<td></td>
				<td id="stn8" align="left" valign="top"></td>
				<td></td>
				<td id="stn9" align="left" valign="top"></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td id="stn10" align="left" valign="top"></td>
				<td></td>
				<td id="stn11" align="left" valign="top"></td>
				<td></td>
				<td id="stn12" align="left" valign="top"></td>
				<td></td>
				<td id="stn13" align="left" valign="top"></td>
				<td></td>
				<td id="stn14" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="stn15" align="left" valign="top"></td>
				<td></td>
				<td id="stn16" align="left" valign="top"></td>
				<td></td>
				<td id="stn17" align="left" valign="top"></td>
				<td></td>
				<td id="stn18" align="left" valign="top"></td>
				<td></td>
				<td id="stn19" align="left" valign="top"></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td id="stn20" align="left" valign="top"></td>
				<td></td>
				<td id="stn21" align="left" valign="top"></td>
				<td></td>
				<td id="stn22" align="left" valign="top"></td>
				<td></td>
				<td id="stn23" align="left" valign="top"></td>
				<td></td>
				<td id="stn24" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="stn25" align="left" valign="top"></td>
				<td></td>
				<td id="stn26" align="left" valign="top"></td>
				<td></td>
				<td id="stn27" align="left" valign="top"></td>
				<td></td>
				<td id="stn28" align="left" valign="top"></td>
				<td></td>
				<td id="stn29" align="left" valign="top"></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td id="stn30" align="left" valign="top"></td>
				<td></td>
				<td id="stn31" align="left" valign="top"></td>
				<td></td>
				<td id="stn32" align="left" valign="top"></td>
				<td></td>
				<td id="stn33" align="left" valign="top"></td>
				<td></td>
				<td id="stn34" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="stn35" align="left" valign="top"></td>
				<td></td>
				<td id="stn36" align="left" valign="top"></td>
				<td></td>
				<td id="stn37" align="left" valign="top"></td>
				<td></td>
				<td id="stn38" align="left" valign="top"></td>
				<td></td>
				<td id="stn39" align="left" valign="top"></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td id="stn40" align="left" valign="top"></td>
				<td></td>
				<td id="stn41" align="left" valign="top"></td>
				<td></td>
				<td id="stn42" align="left" valign="top"></td>
				<td></td>
				<td id="stn43" align="left" valign="top"></td>
				<td></td>
				<td id="stn44" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="stn45" align="left" valign="top"></td>
				<td></td>
				<td id="stn46" align="left" valign="top"></td>
				<td></td>
				<td id="stn47" align="left" valign="top"></td>
				<td></td>
				<td id="stn48" align="left" valign="top"></td>
				<td></td>
				<td id="stn49" align="left" valign="top"></td>
				<td></td>
			</tr>
		</table>
		<table id="tb4" cellpadding="0" cellspacing="0" align="center">
			<tr>
				<td onclick="clkwhite();"></td>
				<td id="clk0" onclick="clk(0)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk1" onclick="clk(1)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk2" onclick="clk(2)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk3" onclick="clk(3)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk4" onclick="clk(4)" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="clk5" onclick="clk(5)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk6" onclick="clk(6)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk7" onclick="clk(7)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk8" onclick="clk(8)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk9" onclick="clk(9)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
			</tr>
			<tr>
				<td onclick="clkwhite();"></td>
				<td id="clk10" onclick="clk(10)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk11" onclick="clk(11)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk12" onclick="clk(12)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk13" onclick="clk(13)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk14" onclick="clk(14)" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="clk15" onclick="clk(15)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk16" onclick="clk(16)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk17" onclick="clk(17)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk18" onclick="clk(18)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk19" onclick="clk(19)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
			</tr>
			<tr>
				<td onclick="clkwhite();"></td>
				<td id="clk20" onclick="clk(20)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk21" onclick="clk(21)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk22" onclick="clk(22)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk23" onclick="clk(23)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk24" onclick="clk(24)" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="clk25" onclick="clk(25)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk26" onclick="clk(26)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk27" onclick="clk(27)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk28" onclick="clk(28)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk29" onclick="clk(29)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
			</tr>
			<tr>
				<td onclick="clkwhite();"></td>
				<td id="clk30" onclick="clk(30)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk31" onclick="clk(31)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk32" onclick="clk(32)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk33" onclick="clk(33)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk34" onclick="clk(34)" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="clk35" onclick="clk(35)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk36" onclick="clk(36)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk37" onclick="clk(37)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk38" onclick="clk(38)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk39" onclick="clk(39)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
			</tr>
			<tr>
				<td onclick="clkwhite();"></td>
				<td id="clk40" onclick="clk(40)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk41" onclick="clk(41)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk42" onclick="clk(42)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk43" onclick="clk(43)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk44" onclick="clk(44)" align="left" valign="top"></td>
			</tr>
			<tr>
				<td id="clk45" onclick="clk(45)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk46" onclick="clk(46)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk47" onclick="clk(47)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk48" onclick="clk(48)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
				<td id="clk49" onclick="clk(49)" align="left" valign="top"></td>
				<td onclick="clkwhite();"></td>
			</tr>
		</table>
	</div>
	<div id="foot">
		<img src="images/copy.png">
	</div>
	<div id="out"></div>
</body>

</html>
<!DOCTYPE html>
<html>

<head>
	<title>计时器</title>
</head>

<body>
	<button id="timerButton">开始计时</button>
	<p id="timerDisplay">计时器未启动</p>

	<script>
		var timerButton = document.getElementById('timerButton');
		var timerDisplay = document.getElementById('timerDisplay');
		var startTime, endTime, elapsedTime, timerInterval;

		var isTimerRunning = false;

		timerButton.addEventListener('click', function () {
			if (!isTimerRunning) {
				// 第一次点击按钮，开始计时
				startTime = new Date();
				timerButton.textContent = '结束计时';
				timerDisplay.textContent = '计时器已启动';
				isTimerRunning = true;

				// 启动定时器以实时更新计时器的时间显示
				timerInterval = setInterval(updateTimer, 1000);
			} else {
				if (startTime && !endTime) {
					// 第二次点击按钮，结束计时
					endTime = new Date();
					elapsedTime = (endTime - startTime) / 1000; // 转换为秒
					timerButton.textContent = '重置时间';
					timerDisplay.textContent = '计时结束，总共耗时：' + elapsedTime + '秒';
					isTimerRunning = false;
					// 将数据写入文本文件
					var data = '开始时间: ' + startTime + '\n结束时间: ' + endTime + '\n总耗时: ' + elapsedTime + '秒';
					downloadFile(data, 'timer_data.txt');
					// 停止定时器
					clearInterval(timerInterval);
				} else {
					// 第三次点击按钮，重置时间
					startTime = null;
					endTime = null;
					elapsedTime = null;
					timerButton.textContent = '开始计时';
					timerDisplay.textContent = '计时器已重置';
					isTimerRunning = false;

					// 停止定时器
					clearInterval(timerInterval);
				}
			}
		});

		function updateTimer() {
			var currentTime = new Date();
			elapsedTime = (currentTime - startTime) / 1000; // 转换为秒
			timerDisplay.textContent = '计时时间：' + elapsedTime + '秒';
		}
		function downloadFile(data, filename) {
			var element = document.createElement('a');
			element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(data));
			element.setAttribute('download', filename);
			element.style.display = 'none';
			document.body.appendChild(element);
			element.click();
			document.body.removeChild(element);
		}
		const downloadBtn = document.createElement('button');
		downloadBtn.textContent = '下载记录';
		downloadBtn.addEventListener('click', downloadRecord);
		document.body.appendChild(downloadBtn);
	</script>
</body>